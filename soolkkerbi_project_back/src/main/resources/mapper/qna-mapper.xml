<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.or.skb.qna.model.dao.QnaDao">

  	<!-- 전체 게시물 수(공개된 게시물) -->
	<select id="totalCount" resultType="int">
		select count(*) from qna
	</select>
	
	<!-- 페이지 네비게이션 및 게시물 개수 조회 --> 
 	<select id="selectQnaList" resultType="qna">
		SELECT * FROM 
		    (SELECT ROWNUM AS RNUM, B.* FROM
		        (SELECT
		            QNA_NO, 
		            QNA_TITLE, 		            
		            TO_CHAR(QNA_DATE, 'YYYY-MM-DD') AS QNA_DATE,
		            QNA_STATUS
		        FROM QNA
		        JOIN MEMBER ON (QNA_MEMBER_NO = MEMBER_NO) 
		        ORDER BY 1 DESC)B)
		WHERE RNUM BETWEEN #{start} AND #{end}
 	</select>
 	
</mapper>
